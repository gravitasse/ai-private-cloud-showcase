---
# Multicloud sync playbook
# Runs from macOS but targets two K8s contexts:
#  - eks
#  - gke

- name: Sync manifests to both clouds
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    manifests_dir: "../../k8s/apps"
  tasks:
    - name: Apply manifests to AWS EKS
      command: kubectl --context=eks apply -f {{ manifests_dir }}
      ignore_errors: true

    - name: Apply manifests to GCP GKE
      command: kubectl --context=gke apply -f {{ manifests_dir }}
      ignore_errors: true
